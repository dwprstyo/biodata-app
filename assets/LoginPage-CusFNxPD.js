import{r as d,O as f,P as y,R as s,S as x,U as t,$ as _,a0 as u,X as l,aC as v,aB as c,f as w,V as b}from"./index-PSwYSZJy.js";import{Q as h}from"./QForm-D-HCmwBE.js";import{Q as V,a as P}from"./index-CFKxzZE_.js";import{api as m}from"./api-BjUWNX_q.js";import{u as Q}from"./use-quasar-CLG_41-P.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-3fevySbJ.js";const k=Object.assign({name:"LoginPage"},{__name:"LoginPage",setup(B){const i=Q(),p=x(),r=d(null),n=d(null),g=async()=>{try{const o=await m.post(P.auth.login,{email:r.value,password:n.value}),e=o.data.access_token;console.log(o.data),localStorage.setItem("token",e),m.defaults.headers.common.Authorization=`Bearer ${e}`,i.notify({type:"positive",message:"Login successful!"}),p.push("/")}catch(o){i.notify({type:"negative",message:"Login failed. Please check your credentials."}),console.log(o)}};return(o,e)=>(y(),f(V,{class:"flex flex-center bg-grey-2"},{default:s(()=>[t(_,{class:"q-pa-md shadow-2 my-card",bordered:""},{default:s(()=>[t(u,{class:"text-center"},{default:s(()=>e[2]||(e[2]=[l("div",{class:"text-grey-9 text-h5 text-weight-bold"},"Sign In",-1),l("div",{class:"text-grey-8"},"Sign in below to access your account",-1)])),_:1,__:[2]}),t(u,null,{default:s(()=>[t(h,{onSubmit:v(g,["prevent"]),class:"q-gutter-md"},{default:s(()=>[t(c,{dense:"",outlined:"",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),label:"Email",type:"email","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type your email"]},null,8,["modelValue","rules"]),t(c,{dense:"",outlined:"",type:"password",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),label:"Password","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type your password"]},null,8,["modelValue","rules"]),l("div",null,[t(w,{label:"Login",type:"submit",color:"primary",class:"full-width"})])]),_:1})]),_:1}),t(u,{class:"text-center q-pt-none"},{default:s(()=>e[3]||(e[3]=[l("div",{class:"text-grey-8"},[b(" Don't have an account yet? "),l("a",{href:"#",class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},"Sign up.")],-1)])),_:1,__:[3]})]),_:1})]),_:1}))}}),$=S(k,[["__scopeId","data-v-72f81a6a"]]);export{$ as default};
