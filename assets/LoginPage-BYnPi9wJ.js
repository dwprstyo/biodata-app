import{r as i,O as f,P as y,R as o,S as _,U as s,$ as w,a0 as d,X as n,aC as b,aB as c,f as v}from"./index-DiYXHr9q.js";import{Q as x}from"./QForm-DDZw80uw.js";import{Q as h,a as P}from"./index-BoT6VyDg.js";import{api as m}from"./api-Cyuzww_B.js";import{u as Q}from"./use-quasar-DrIMedZY.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-3fevySbJ.js";const S=Object.assign({name:"LoginPage"},{__name:"LoginPage",setup(k){const u=Q(),p=_(),l=i(null),r=i(null),g=async()=>{try{const t=await m.post(P.auth.login,{email:l.value,password:r.value}),e=t.data.access_token;console.log(t.data),localStorage.setItem("token",e),m.defaults.headers.common.Authorization=`Bearer ${e}`,u.notify({type:"positive",message:"Login successful!"}),p.push("/")}catch(t){u.notify({type:"negative",message:"Login failed. Please check your credentials."}),console.log(t)}};return(t,e)=>(y(),f(h,{class:"flex flex-center bg-grey-2"},{default:o(()=>[s(w,{class:"q-pa-md shadow-2 my-card",bordered:""},{default:o(()=>[s(d,{class:"text-center"},{default:o(()=>e[2]||(e[2]=[n("div",{class:"text-grey-9 text-h5 text-weight-bold"},"Sign In",-1),n("div",{class:"text-grey-8"},"Sign in below to access your account",-1)])),_:1,__:[2]}),s(d,null,{default:o(()=>[s(x,{onSubmit:b(g,["prevent"]),class:"q-gutter-md"},{default:o(()=>[s(c,{dense:"",outlined:"",modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),label:"Email",type:"email","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type your email"]},null,8,["modelValue","rules"]),s(c,{dense:"",outlined:"",type:"password",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),label:"Password","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type your password"]},null,8,["modelValue","rules"]),n("div",null,[s(v,{label:"Login",type:"submit",color:"primary",class:"full-width"})])]),_:1})]),_:1})]),_:1})]),_:1}))}}),$=V(S,[["__scopeId","data-v-2c947585"]]);export{$ as default};
